# What is new in 2087

Modifications in 2087

\- options, programmer shows an image (when available) of the selected programmer

\- config [varptrMode](config_varptrmode.md) added to change behavior of Varptr()

\- [TYPE](type.md) support added.

\- xtiny low IO registers would not paint red/blue in the simulator.

\- print fusing() with a single array would fail because of a bug that trashed a register.

\- new [$USER](user.md) directive added for creating .usr files for the Xtiny platform. This is a user signature data. Using $USER and DATA you can create the .usr file

\- config TCDx changed so CTRLA is written last and the the status.0 bit is checked. without this the timer would not initialize properly

\- readsig() for xtiny uses a named constant since the address might be different for other xtiny platforms.

\- [$PROGRAMMER](programmer.md) supports serial number for MCS EDBG programmer

\- [1wread](1wread.md)(bts , PinE , 3) failed when bts was a variable.

\- [Config printX](configprint.md) has an additional parameter : DELAY=time. This is an optional parameter that can be used to delay for the specified time before the data direction pin is switched 

\- Options, Environment, IDE, new parser has an updated description.

\- When using new parser and wrong syntax for $regfile, the setting from the config file was used. Now you will get an error so it is clear you use the wrong DAT file.

\- When storing project .prj file in a folder other than the source, source code errors reported by the compiler were not jumped to when double clicked in the Error window.

\- Alert window position is saved.

\- STOP WATCHDOG bug fixed for Xtiny platform.

\- Simulator IO grid improved for speed. Other grids in simulator are improved as well since they use the same improved code.

\- Simulator SRAM grid improved for speed and displaying options. See help.

\- I2CINIT bug fixed for xtiny 8 pin devices which have a different port for I2C

\- When updating from an old version and keeping settings files, the options, Compiler , LCD could have a value of nothing(not selected). This could cause the compilation to end without creating bin/hex files.

\- Alternative rename added using References, right click menu : [RENAME](view_code_explorer.md). This will rename the selected item in the whole project, including the files on disk that are not loaded.

\- [Microchip CMIS-DAP programmers](mcs_snap_programmer.md) support added. The programmer is named MCS EDBG programmer.

\- [Config DMXSLAVE](config_dmxslave.md) bug fixed for COM4. Also COM5 and COM6 added.

\- [Search and Replace](edit_replace.md) in files added. this is similar to Search and Find in Files but you can replace text.

\- Find, search and replace button added to clear the history. this replaces the right click menu. 

\- [readSig](readsig.md)() support for Xtiny platform added.

\- [MCS UPDI programmer](updi_programmer.md) info added for USB virtual COM drivers/chips. 

\- [_XTINY](xtiny.md) constant in the DAT files set to 4 for the EA series since they differ significantly.

\- Xtiny EEPROM writing updated and modified since all series handle this different in the NVM.

_EPROM_PAGESIZE is now an internal constant since it is used in the xtiny.lib. This does also fix a potential EEPROM write problem for some UPDI processors. This constant is auto generated by the compiler.

\- Pulseout did not work on normal AVR extended ports. An extended port has a memory address > &H60

\- Using INPUT on XMEGA with a software UART would result in stack loss caused by code intended for the HW UART.

\- Using .\ for include files could load the file twice in the IDE when clicking the Error window and the code explorer. While this is fixed now, to include files that reside in the same folder as the main application, do not prefix the file.

\- [$programmer](programmer.md) additional COMPORT option did not work for MCS Bootloader. Also notice that New Parser must be selected in Options, Environment, IDE for this option.

\- GETRC fix for xmega and Xtiny. While XMega would work with passing DDR register, the Xtiny passed the wrong register. Now all platforms can pass PINx register.

\- CONFIG XPIN accepts both OUTPULL and PULLUP as a parameter to activate pullup. While normal AVR only supports pullup for input mode and the Xtiny till today also support pullup for input mode only, the Xmega supports various  
modes in output mode as well. Since XMEGA was the first chip with pullup and atmel named it outpull we used this term too. But as it will be confusing for Xtiny/normal AVR, PULLUP is added.

\- MCS UPDI programmer supports P3 protocol too as found in the EA series.

\- Simulation of xmega eeprom did not work. 

\- READ statement did not support multi dim arrays. The optional number of bytes parameter was not described in the help.

\- Room for labels and other data increased in order to fix error 337.

\- MCS UPDI programmer write counter added. It keeps track how many times a processor is programmed based on its serial number.

\- SAFE option for DIM had a bug for one usage case. Also optimized the code for multiple safe access.

\- The simulator memory handling had a bug for LD reg,X so depending on used platform this could result in wrong simulation.

\- HW register color could not be changed anymore. 

\- Bigbuffers added for COM1/USART0. It uses bigbuf.lib which need to be included using $LIB. Set this option using CONFIG COM1 BIGSIZE instead of SIZE.

\- Config-kbd extended in DAT file with possible options

\- [CANSEND](cansend.md) statement added. this statement does not wait/blocks the code. see help.

\- Watchdog documentation improved for xtiny. also added example watchdog-avrx128da28.bas

\- Splash window adjusted to show new xtiny processors

\- Some DAT files had the wrong flash_size value which results in programming problems

\- Find window lost right click copy,past,cut options when 'clear history' was added. 

\- Config comx new options RX and TX enabled/disabled were reversed. (tx would disable rx and vice versa)